<!DOCTYPE html
    PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
    <link type="text/css" rel="stylesheet" href="../../Resource/css/index/customGreen.css" />
    <link type="text/css" rel="stylesheet" href="../../Resource/js/easyUI/themes/easyuiGreen.css" />
    <link type="text/css" rel="stylesheet" href="../../Resource/js/easyUI/themes/icon.css" />
    <link type="text/css" rel="stylesheet" href="../../Resource/js/locationsChoose/css.css" />
    <link id="CustomTheme" type="text/css" rel="stylesheet" href="../../Resource/css/index/customLightBlue.css" />
    <link id="EasyuiTheme" type="text/css" rel="stylesheet"
        href="../../Resource/js/easyUI/themes/easyuiLightBlue.css" />
    <link id="JqgridTheme" type="text/css" rel="stylesheet"
        href="../../Resource/js/jqueryUI/theme/jqgridLightBlue/jquery-ui-1.10.4.custom.css" />
    <link type="text/css" rel="stylesheet" href="../../Resource/js/moment/css/daterangepicker.css" />
    <link type="text/css" rel="stylesheet" href="../../Resource/js/jqueryUI/theme/ui.jqgrid.css" />
    <link type="text/css" rel="stylesheet" href="../../Resource/js/fileUpload/css/fileUpload.css" />

    <title>#{withinSetDetail}</title>
</head>

<body>
    <div id="toolbar" class="easyui-panel" style="padding: 4px; border-width: 0; border-bottom-width: 1px;">
        #{PAGE_TOOLBAR_BUTTONROLE}
    </div>
    <div>
        <form id="addForm" class="easyui-form" method="post" data-options="novalidate:true">
            <table class="editTable">
                <tr>
                    <td class="editTitle"><label data-locale="vision"/>:</td>
                    <td class="editControl">
                        <input type="text" name="vision" id="vision" class="easyui-textbox"
                        readonly=true />
                    </td>
                    <td class="editTitle"><label data-locale="amount"/>:</td>
                    <td class="editControl">
                        <input type="text" name="amount" id="amount" class="easyui-textbox"
                        readonly=true />¥
                    </td>
                </tr>

                <tr>
                    <td class="editTitle"><label data-locale="end_date"/>:</td>
                    <td class="editControl">
                        <input type="text" name="end_date" id="end_date" class="easyui-textbox"
                        readonly=true />
                    </td>
                    <td class="editTitle"><label data-locale="sel_tihuo"/>:</td>
                    <td class="editControl">
                        <input type="text" name="sel_tihuo" id="sel_tihuo" class="easyui-combobox"
                        data-options="valueField:'id',textField:'text',data:selState"/>
                    </td>
                </tr>

                <tr>
                    <td class="editTitle"><label data-locale="driverCheck"/>:</td>
                    <td class="editControl">
                        <input type="text" name="is_driver_check" id="is_driver_check" class="easyui-combobox"
                        data-options="valueField:'id',textField:'text',data:checkState" />
                    </td>
                    <td class="editTitle"><label data-locale="truckCheck"/>:</td>
                    <td class="editControl">
                        <input type="text" name="is_truck_check" id="is_truck_check" class="easyui-combobox"
                        data-options="valueField:'id',textField:'text',data:checkState" />
                    </td>
                </tr>

                <tr>
                    <td class="editTitle"><label data-locale="GPS"/>:</td>
                    <td class="editControl">
                        <input type="text" name="gps_offline_time" id="gps_offline_time" class="easyui-numberbox"
                        data-options="min:0,precision:0"/>/<label data-locale="min"/>
                    </td>

                    <td class="editTitle"><label data-locale="showAddressName"/>:</td>
                    <td class="editControl">
                        <input type="text" name="is_km_address" id="is_km_address" class="easyui-combobox"
                        data-options="valueField:'id',textField:'text',data:checkState" />
                    </td>
                </tr>

                <tr>
                    <td class="editTitle"><label data-locale="overSpeed"/>:</td>
                    <td class="editControl">
                        <input type="text" name="gps_overspeed" id="gps_overspeed" class="easyui-numberbox"
                        data-options="min:0,precision:0"/>/km
                    </td>

                    <td class="editTitle"><label data-locale="avgSpeed"/>:</td>
                    <td class="editControl">
                        <input type="text" name="gps_avgspeed" id="gps_avgspeed" class="easyui-numberbox"
                        data-options="min:0,precision:0"/>/km
                    </td>
                </tr>

                <tr>
                    <td class="editTitle"><label data-locale="sendSMS"/>:</td>
                    <td class="editControl">
                        <input type="text" name="api_error_send_sms" id="sendSMS" class="easyui-combobox"
                        data-options="valueField:'id',textField:'text',data:checkState" />
                    </td>

                    <td class="editTitle"><label data-locale="sendEmail"/>:</td>
                    <td class="editControl">
                        <input type="text" name="api_error_send_email" id="sendEmail" class="easyui-combobox"
                        data-options="valueField:'id',textField:'text',data:checkState" />
                    </td>
                </tr>

                <tr>
                    <td class="editTitle"><label data-locale="jiaofuMust"/>:</td>
                    <td class="editControl">
                        <input type="text" name="is_must_phone_jiaofu" id="jiaofuMust" class="easyui-combobox"
                        data-options="valueField:'id',textField:'text',data:checkState" />
                    </td>

                    <td class="editTitle"><label data-locale="checkArrival"/>:</td>
                    <td class="editControl">
                        <input type="text" name="is_must_fence_check_arrival" id="checkArrival" class="easyui-combobox"
                        data-options="valueField:'id',textField:'text',data:checkState" />
                    </td>
                </tr>
                <tr>
                    <td class="editTitle"><label data-locale="bussinessIdOrYwId"/>：</td>
                    <td class="editControl">
                        <input class="easyui-combobox" id="show_bill_mode" name="show_bill_mode" data-options="valueField:'id',textField:'text',data:orderOrWay"/>
                    </td>
                    <td class="editTitle"><label data-locale="showMostlyOrDetail"/>:</td>
                    <td class="editControl">
                        <input class="easyui-combobox" id="tihuojiaofu_mode" name="tihuojiaofu_mode" data-options="valueField:'id',textField:'text',data:tihuojiaoMode"/>
                    </td>
                </tr>
                <tr>
                    <td class="editTitle"><label data-locale="checkCreateOrder"/>���</td>
                    <td class="editControl">
                        <input class="easyui-combobox" id="is_auto_generate_yd" name="is_auto_generate_yd" data-options="valueField:'id',textField:'text',data:checkState" />
                    </td>
                    <td class="editTitle"><label data-locale="informError"/>：</td>
                    <td class="editControl">
                        <input class="easyui-combobox" id="is_error_notice" name="is_error_notice" data-options="valueField:'id',textField:'text',data:checkState" />
                    </td>
                </tr>
                <tr>
                    <td class="editTitle"><label data-locale="informJiaofu"/>：</td>
                    <td class="editControl">
                        <input class="easyui-combobox" id="is_jiaofu_notice" name="is_jiaofu_notice" data-options="valueField:'id',textField:'text',data:checkState" />
                    </td>
                    <td class="editTitle"><label data-locale="sitePGoods"/>：</td>
                    <td class="editControl">
                        <input class="easyui-combobox" id="is_must_phone_p_site_fh" name="is_must_phone_p_site_fh" data-options="valueField:'id',textField:'text',data:checkState" />
                    </td>
                </tr>
                <tr>
                    <td class="editTitle"><label data-locale="siteQGoods"/>：</td>
                    <td class="editControl">
                        <input class="easyui-combobox" id="is_must_phone_q_site_fh" name="is_must_phone_q_site_fh" data-options="valueField:'id',textField:'text',data:checkState" />
                    </td>
                </tr>
            </table>
        </form>
    </div>

</body>
<script type="text/javascript" src="../../Resource/js/jquery-2.0.0.min.js"></script>
<script type="text/javascript" src="../../Resource/js/jquery.i18n.properties.js"></script>
<script type="text/javascript" src="../../Resource/js/jquery-migrate-1.2.1.min.js"></script>
<script type="text/javascript" src="../../Resource/js/easyUI/jquery.easyui.min.js"></script>
<script type="text/javascript" src="../../Resource/js/easyUI/jquery.easyuiExtend.min.js"></script>
<script type="text/javascript" src="../../Resource/js/easyUI/easyui-lang-zh_CN.js"></script>
<script type="text/javascript" src="../../Resource/js/base/commonControl.js"></script>
<script type="text/javascript" src="../../Resource/js/base/globalVariable.js"></script>
<script type="text/javascript" src="../../Resource/js/base/commonBusiness.js"></script>
<script type="text/javascript" src="../../Resource/js/jqueryUI/i18n/grid.locale-cn.js"></script>
<script type="text/javascript" src="../../Resource/js/jqueryUI/jquery.jqGrid.min.js"></script>
<script type="text/javascript" src="../../Resource/js/My97DatePicker/WdatePicker.js"></script>
<script type="text/javascript" src="../../Resource/js/jqueryUI/plugins/grid.setcolumns.js"></script>
<script type="text/javascript" src="../../Resource/js/regex/regex.js"></script>


<script language="javascript" type="text/javascript">
    var sn;
    var vis;
    var selState = [
        {
            id: 'Y',
            text: $.i18n.prop('allow')
        },{
            id: 'N',
            text: $.i18n.prop('unallow')
        }
    ];

    checkState = [
        {
            id: 'Y',
            text: $.i18n.prop('yes')
        },{
            id: 'N',
            text: $.i18n.prop('no')
        }
    ]

    var orderOrWay = [
        {id : 'Y', text: 'TMS内部运单号'},
        {id : 'B', text: '客户订单号'}
    ]

    var tihuojiaoMode = [
        {id: 'Y', text: '运单层级'},
        {id: 'C', text: '货物明细'}
    ]

    var verState = {
        "0": $.i18n.prop('standard')
        ,
        "1": $.i18n.prop('enterprise')
        ,
        "2": $.i18n.prop('luxury')
    };


    $(function () {
        selectDetail();
    });

    $(window).load(function () {
        hideLoading();
    });

    var selectDetail = function () {
        $.ajax({
            url: '../../sys/withinSet/searchWithinSetDetail',
            method: 'GET',
            success: function (result) {
                console.log(result)
                data = result.resultDataFull
                // sn = data.sn
                $("#sel_tihuo").combobox('setValue', data.sel_tihuo);
                $("#vision").textbox('setValue', verState[data.vision]);
                $("#end_date").textbox('setValue', data.end_date);
                $("#amount").textbox('setValue', data.amount);
                $("#is_driver_check").combobox('setValue', data.is_driver_check);
                $("#is_truck_check").combobox('setValue', data.is_truck_check);
                $("#gps_offline_time").textbox('setValue', data.gps_offline_time);
                $("#is_km_address").combobox('setValue', data.is_km_address);
                $("#gps_overspeed").textbox('setValue', data.gps_overspeed);
                $("#gps_avgspeed").textbox('setValue', data.gps_avgspeed);
                $("#sendSMS").combobox('setValue', data.api_error_send_sms);
                $("#sendEmail").combobox('setValue', data.api_error_send_email);
                $("#checkArrival").combobox('setValue', data.is_must_fence_check_arrival);
                $("#jiaofuMust").combobox('setValue', data.is_must_phone_jiaofu);
                $("#tihuojiaofu_mode").combobox('setValue', data.tihuojiaofu_mode);
                $("#show_bill_mode").combobox('setValue', data.show_bill_mode);
                $("#is_auto_generate_yd").combobox('setValue', data.is_auto_generate_yd);
                $("#is_error_notice").combobox('setValue', data.is_error_notice);
                $("#is_jiaofu_notice").combobox('setValue', data.is_jiaofu_notice);
                $("#is_must_phone_q_site_fh").combobox('setValue', data.is_must_phone_q_site_fh);
                $("#is_must_phone_p_site_fh").combobox('setValue', data.is_must_phone_p_site_fh);

                sn = data.sn
                vis = data.vision
            }
        })
    }
 
    var save = function () {
        var withinSetInfo = FormUtils.toJSONObject($("#addForm"));
        withinSetInfo.sn = sn;      
        withinSetInfo.vision = vis;       
        withinSetInfo.amount = (withinSetInfo.amount).substring(1,(withinSetInfo.amount).length-1);

        console.log(withinSetInfo)
        $.messager.confirm($.i18n.prop('alert'), '#{make sure to save}?', function (r) {
            if (r) {
                $.ajax({
                    url: '../../sys/withinSet/saveWithinSet?t=' + Math.random(),
                    type: 'POST',
                    contentType: "application/json; charset=utf-8",
                    dataType: "json",
                    data: JSON.stringify(withinSetInfo),
                    success: function (dataObj) {
                        hideLoading();
                        if (isServerResultDataPass(dataObj)) {
                            correctNotification({ SimpleMessage: $.i18n.prop('success save') });
                        } else {
                            FailResultDataToTip(dataObj);
                        }
                    }
                });
            }
        });
    }

</script>

</html>